<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnóstico - VINNAX</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .success {
            background: #4CAF50;
            color: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
        }
        .info {
            background: #2196F3;
            color: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
        }
        h1 { color: #333; }
        pre {
            background: #333;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>✅ Diagnóstico do Sistema VINNAX</h1>
    
    <div class="success">
        <h2>✓ SERVIDOR FUNCIONANDO</h2>
        <p>Se você está vendo esta página, o servidor está funcionando corretamente.</p>
    </div>

    <div class="info">
        <h2>Informações do Sistema</h2>
        <p><strong>Domínio:</strong> <span id="domain">Carregando...</span></p>
        <p><strong>Data/Hora:</strong> <span id="datetime">Carregando...</span></p>
        <p><strong>User Agent:</strong> <span id="useragent">Carregando...</span></p>
    </div>

    <div class="info">
        <h2>Teste de JavaScript</h2>
        <p id="jstest">❌ JavaScript NÃO está funcionando</p>
    </div>

    <div class="info">
        <h2>Próximos Passos</h2>
        <ol>
            <li>Acesse: <a href="https://copomrv.vinnax.app/diagnostico.html" target="_blank">https://copomrv.vinnax.app/diagnostico.html</a></li>
            <li>Se esta página aparecer, o servidor está OK</li>
            <li>Se o teste de JavaScript estiver verde, o JavaScript está OK</li>
            <li>O problema está no build do React ou no index.html</li>
        </ol>
    </div>

    <pre id="console"></pre>

    <script>
        // Teste de JavaScript
        document.getElementById('jstest').innerHTML = '✅ JavaScript está funcionando!';
        document.getElementById('jstest').style.color = '#4CAF50';
        
        // Informações
        document.getElementById('domain').textContent = window.location.href;
        document.getElementById('datetime').textContent = new Date().toLocaleString('pt-BR');
        document.getElementById('useragent').textContent = navigator.userAgent;
        
        // Log de console
        const consoleDiv = document.getElementById('console');
        const log = (msg) => {
            consoleDiv.textContent += msg + '\n';
            console.log(msg);
        };
        
        log('=== DIAGNÓSTICO INICIADO ===');
        log('URL: ' + window.location.href);
        log('Protocol: ' + window.location.protocol);
        log('Host: ' + window.location.host);
        log('Pathname: ' + window.location.pathname);
        log('');
        log('=== TENTANDO CARREGAR ASSETS ===');
        
        // Tentar carregar o main.tsx
        fetch('/src/main.tsx')
            .then(r => {
                log('✅ /src/main.tsx responde: ' + r.status);
                return r.text();
            })
            .then(text => {
                log('✅ Tamanho: ' + text.length + ' bytes');
            })
            .catch(e => {
                log('❌ Erro ao carregar /src/main.tsx: ' + e.message);
            });
            
        // Tentar carregar o build
        fetch('/assets/')
            .then(r => {
                log('✅ /assets/ responde: ' + r.status);
            })
            .catch(e => {
                log('❌ Erro ao carregar /assets/: ' + e.message);
            });
    </script>
</body>
</html>
